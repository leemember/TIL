<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>클로저의 실제 활용 예</title>
  </head>
  <body>
    <div id="wrapper">
      <button data-cb="1">add div</button>
      <button data-cb="2">add img</button>
      <button data-cb="delete">Clear</button>
      Adding below...<br />
      <div id="appendDiv"></div>
    </div>

    <script>
      (function () {
        var appendDiv = document.getElementById("appendDiv");
        document.getElementById("wrapper").addEventListener("click", append);

        function append(e) {
          var target = e.target || e.srcElement || event.srcElement;
          var callbackFunction = callback[target.getAttribute("data-cb")];
          appendDiv.appendChild(callbackFunction());
          console.log(callbackFunction());
        }

        var callback = {
          1: (function () {
            var div = document.createElement("div");
            div.innerHTML = "adding new div";
            return function () {
              return div.cloneNode(true);
            };
          })(),

          2: (function () {
            var img = document.createElement("img");
            img.src =
              "https://www.campusn.co.kr/data/photos/20200417/art_15874681414251_b440af.png";
            return function () {
              return img.cloneNode(true);
            };
          })(),

          delete: function () {
            appendDiv.innerHTML = "";
            return document.createTextNode("Cleared");
          },
        };
      })();
    </script>
  </body>
</html>
